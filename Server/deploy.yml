---
version: "2.0"
services:
  colyseus:
    image: docker.io/fenildocker/olyseus-server-unity-akash:latest
    expose:
      - port: 2567
        as: 2567
        to:
          - global: true
    env:
      - NODE_ENV=production
      - PORT=2567
      - WS_PORT=2567
      - JWT_SECRET=change_me_secure_value
      - AUTH_SALT=change_me_secure_value
      - SESSION_SECRET=change_me_secure_value
      - COLYSEUS_MONITOR_PASSWORD=change_me_monitor_password
      - LOG_LEVEL=info
profiles:
  compute:
    colyseus:
      resources:
        cpu:
          units: 0.5
        memory:
          size: 512Mi
        storage:
          - size: 1Gi
  placement:
    dcloud:
      pricing:
        colyseus:
          denom: ibc/170C677610AC31DF0904FFE09CD3B5C657492170E7E52372E48756B71E56F2F1
          amount: 100000
      attributes:
        host: akash
deployment:
  colyseus:
    dcloud:
      profile: colyseus
      count: 1
